name: CI/CD Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Setup Java 11
        uses: actions/setup-java@v3
        with:
          java-version: '11'
          distribution: 'openjdk'

      - name: Build application (replace with your build steps)
        run: |
          # Replace this with your actual build commands
          # Example: Using a compiler or interpreter
          echo "Building application..."


  test:
    name: Test
    runs-on: ubuntu-latest
    needs: [build]  # This job depends on the 'build' job
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install JUnit and Hamcrest
        run: |
          wget https://repo.maven.apache.org/maven2/org/junit/junit/4.13.2/junit-4.13.2.jar
          unzip junit-4.13.2.jar

          wget https://repo.maven.apache.org/maven2/org/hamcrest/core/1.3.0/hamcrest-core-1.3.0.jar
          unzip hamcrest-core-1.3.0.jar

      - name: Run JUnit tests
        run: |
          java -jar junit-4.13.2.jar org.junit.runner.JUnitCore CalculatriceTest


  deployment:
    name: Deployment
    runs-on: ubuntu-latest
    needs: [test]  # This job depends on the 'test' job
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Deploy to production (replace with your deployment steps)
        run: |
          # Replace this with your actual deployment commands
          # Example: Using Docker, Ansible, or manually copying files
          echo "Deploying to production..."
